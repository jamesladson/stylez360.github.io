/*! For license information please see streamer.8560b0af439ea36e069c.mjs.LICENSE.txt */
(()=>{"use strict";var e={8010:(e,t,s)=>{s.r(t);var i=s(3379),o=s.n(i),n=s(7229);o()(n.Z,{injectType:"singletonStyleTag",insert:"head",singleton:!0});const r=n.Z.locals||{},a="streamer",c="txt",l="data-field",d="data-symbol",u="data-stream",b="value",f="active";class m extends HTMLElement{constructor(){super(),this.initialized=!1,this.cssToggle=!1,this.onUpdate=this.onUpdate.bind(this)}static get observedAttributes(){return[d,l,f]}onUpdate(e,{field:t,quote:s}={}){if(!e&&"number"!=typeof e)return;const i="object"!=typeof e?{raw:e,fmt:e}:e,{fmt:o,raw:n}=i,r=parseFloat(this.getAttribute(b)||"");if(r!==n){const e=this.getAttribute("changeev");e&&this.dispatchEvent(new CustomEvent(`finWebCore_${e}`,{detail:{raw:n,fmt:o,field:t,quote:s},bubbles:!0})),this.cssToggle=!this.cssToggle,this.render({raw:n,fmt:o,trend:n-r})}}subscribe({symbols:e,fields:t}){var s;e&&t&&e.length&&t.length&&this.hasAttribute(f)&&"function"==typeof(null==(s=window.finQuoteStreamer)?void 0:s.subscribe)&&window.finQuoteStreamer.subscribe({symbols:e,fields:t,type:this.getAttribute(u)||a,priceHint:this.getAttribute("data-pricehint"),formatStyle:this.getAttribute("data-fstyle"),callback:this.onUpdate})}unsubscribe({symbols:e,fields:t}){var s;e&&t&&e.length&&t.length&&"function"==typeof(null==(s=window.finQuoteStreamer)?void 0:s.unsubscribe)&&window.finQuoteStreamer.unsubscribe({symbols:e,fields:t,type:this.getAttribute(u)||a,callback:this.onUpdate})}connectedCallback(){if(!this.initialized){const e=this.getAttribute(l),t=this.getAttribute(d);t&&e&&this.subscribe({symbols:[t],fields:[e]}),this.initialized=!0}}disconnectedCallback(){const e=this.getAttribute(l),t=this.getAttribute(d);t&&e&&this.unsubscribe({symbols:[t],fields:[e]}),this.initialized=!1}attributeChangedCallback(e,t,s){if(this.initialized)switch(e){case d:t!==s&&s&&(this.unsubscribe({symbols:[t],fields:[this.getAttribute(l)]}),this.subscribe({symbols:[s],fields:[this.getAttribute(l)]}));break;case l:t!==s&&s&&(this.unsubscribe({symbols:[this.getAttribute(d)],fields:[t]}),this.subscribe({symbols:[this.getAttribute(d)],fields:[s]}));break;case f:{const e=null!==t,i=null!==s;e&&!i?this.unsubscribe({symbols:[this.getAttribute(d)],fields:[this.getAttribute(l)]}):!e&&i&&this.subscribe({symbols:[this.getAttribute(d)],fields:[this.getAttribute(l)]})}}}render({raw:e,fmt:t,trend:s}){const i=this.getAttribute("data-trend")||c,o=this.getAttribute("data-template");let n=r.base,a="";if(e>0)switch(i){case"bg":n+=` ${r.posBgColor}`,a="+";break;case c:n+=` ${r.posColor}`,a="+"}else if(e<0)switch(i){case"bg":n+=` ${r.negBgColor}`;break;case c:n+=` ${r.negColor}`}s>0?n+=` ${this.cssToggle?r.trendUp1:r.trendUp2}`:s<0&&(n+=` ${this.cssToggle?r.trendDown1:r.trendDown2}`);let l=a+t;o&&(l=function(e,t){let s=e,i=!1;return Object.keys(t).forEach((e=>{t[e]&&(i=!0),s=s.replace(new RegExp(`{${e}}`,"g"),t[e])})),i?s:""}(o,{raw:e,fmt:l})),this.innerHTML=`<span class="${n}">${l}</span>`,this.setAttribute(b,e)}}window.customElements&&!window.customElements.get("fin-streamer")&&window.customElements.define("fin-streamer",m)},7229:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(3645),o=s.n(i)()((function(e){return e[1]}));o.push([e.id,'._98801ccc{color:blue}._11248a25{position:relative;z-index:0}._11248a25:before,._5777d23b{content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%;z-index:-1}._11248a25:before{background-color:#00873c44}._11248a25:after{background-color:#eb0f2944;content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%;z-index:-1}._96166592{color:#00873c}.c8de4835{color:#eb0f29}._3dd3226a{background-color:#00873c}._7b3b8cc9,._3dd3226a{border-radius:3px;color:#fff;padding:2px 10px}._7b3b8cc9{background-color:#eb0f29}._54c8e564{font-size:12px}._927bb2fc{font-size:14px;font-weight:700}._1952935a{font-weight:500;margin-left:4px}@-webkit-keyframes d9153903{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@keyframes d9153903{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@-webkit-keyframes _2a5decf0{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@keyframes _2a5decf0{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@-webkit-keyframes _174e351b{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@keyframes _174e351b{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@-webkit-keyframes d4ce4588{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}@keyframes d4ce4588{25%{display:block;opacity:1}75%{opacity:1}to{display:none;opacity:0}}.c45ef5f5{background-color:#00873c44}.de692f94{background-color:#eb0f2944}.b2e85843:before{-webkit-animation:d9153903 .7s;animation:d9153903 .7s}.a13cb817:before{-webkit-animation:_2a5decf0 .7s;animation:_2a5decf0 .7s}.c916dce9:after{-webkit-animation:_174e351b .7s;animation:_174e351b .7s}._8e5a1db9:after{-webkit-animation:d4ce4588 .7s;animation:d4ce4588 .7s}',""]),o.locals={primaryColor:"#232a31",secondaryColor:"#464e56",tertiaryColor:"#5b636a",layoutBgColor:"#fff",headerBgColor:"#f5f8fa",lv1BgColor:"#f0f3f5",lv2BgColor:"#fff",lv3BgColor:"#fff",seperatorColor:"#e0e4e9",linkColor:"#0f69ff",linkActiveColor:"#125bd4",hoverBgColor:"#e0f0ff",iconColor:"#5b636a",positiveColor:"#00873c",negativeColor:"#eb0f29",neutralColor:"#5b636a",positiveBgColor:"#00873c44",negativeBgColor:"#eb0f2944",activeMarketColor:"#ff7b12","c-fuji-blurple":"#5d5eff","c-fuji-hulk-pants":"#7e1fff","c-fuji-grape-jelly":"#6001d2",boxShadow:"0 2px 4px rgba(0,0,0,.2)",overlayModalBgColor:"rgba(50,50,50,0.6)",newsItemWidth:"calc(100% - 50px)",xs:"11px",xss:"12px",s:"13px",sm:"14px",m:"15px",ml:"16px",l:"18px",dummy:"_98801ccc",base:"_11248a25",baseCommon:"_5777d23b",posColor:"_96166592",negColor:"c8de4835",posBgColor:"_3dd3226a",negBgColor:"_7b3b8cc9",marketNotice:"_54c8e564",prepostCont:"_927bb2fc",prepostChange:"_1952935a",trendUp:"c45ef5f5",trendDown:"de692f94",trendUp1:"b2e85843",trendAnimUp1:"d9153903",trendUp2:"a13cb817",trendAnimUp2:"_2a5decf0",trendDown1:"c916dce9",trendAnimDown1:"_174e351b",trendDown2:"_8e5a1db9",trendAnimDown2:"d4ce4588"};const n=o},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=e(t);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(o[r]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);i&&o[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),t.push(c))}},t}},3379:(e,t,s)=>{var i,o=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),n=[];function r(e){for(var t=-1,s=0;s<n.length;s++)if(n[s].identifier===e){t=s;break}return t}function a(e,t){for(var s={},i=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],l=s[c]||0,d="".concat(c," ").concat(l);s[c]=l+1;var u=r(d),b={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(n[u].references++,n[u].updater(b)):n.push({identifier:d,updater:p(b,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=s.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,s,i){var o=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var n=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}function b(e,t,s){var i=s.css,o=s.media,n=s.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,m=0;function p(e,t){var s,i,o;if(t.singleton){var n=m++;s=f||(f=c(t)),i=u.bind(null,s,n,!1),o=u.bind(null,s,n,!0)}else s=c(t),i=b.bind(null,s,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var s=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var o=r(s[i]);n[o].references--}for(var c=a(e,t),l=0;l<s.length;l++){var d=r(s[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}s=c}}}},477:e=>{e.exports=function(e,t,s,i){var o=self||window;try{try{var n;try{n=new o.Blob([e])}catch(t){(n=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),n=n.getBlob()}var r=o.URL||o.webkitURL,a=r.createObjectURL(n),c=new o[t](a,s);return r.revokeObjectURL(a),c}catch(i){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),s)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new o[t](i,s)}}}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={id:i,exports:{}};return e[i](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="https://s.yimg.com/uc/finance/webcore/",(()=>{function e(e="error",t,s={}){try{var i;if("function"==typeof(null==(i=window.context)?void 0:i.getActionContext)){const i=window.context.getActionContext();"function"==typeof i.beacon&&i.beacon(e,t,s)}else console["error"===e?"error":"log"](e,t,JSON.stringify(s))}catch(e){console.error(e)}}function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}const i=["https://query1.finance.yahoo.com","https://query2.finance.yahoo.com"];var o=s(477),n=s.n(o);function r(){return n()('/*! For license information please see streamer.worker.b8ddc29e6653826c3a90.worker.mjs.LICENSE.txt */\n(()=>{try{"function"==typeof importScripts&&(importScripts("https://cdn.rawgit.com/dcodeIO/protobuf.js/6.8.8/dist/minimal/protobuf.min.js"),importScripts("https://s.yimg.com/uc/finance/webcore/js/_staticFinProtobuf.545131e7093df52f5d2c.mjs"))}catch(e){console.error("> Finance Streamer: Importing protobuff failed.",e)}let e=null,t=null;const s={id:"symbol",dayVolume:"volume",marketcap:"marketCap",marketHours:"marketState"},i={ask:!0,askSize:!0,bid:!0,bidSize:!0,dayLow:!0,dayHigh:!0,expireDate:!0},n={},o={change:!0,changePercent:!0,previousClose:!0,price:!0};function r(e,t){if(isNaN(e))return e;const s=Math.pow(10,t);return+Math.round(e*s)/s}class a{constructor(){this.symbolList={},this.fieldList={},this.connection=null}updateSymbolAndField({symbols:e,fields:t,isAddition:s=!0}){const i=[!1,!1];let n;return[{arr:e,map:this.symbolList},{arr:t,map:this.fieldList}].forEach((({arr:e,map:t},o)=>{let r=!1;for(n=0;n<e.length;n++){const i=e[n];t[i]?s?t[i]++:t[i]--:s?(t[i]=1,r=!0):delete t[i]}r&&(i[o]=!0)})),i}resetSymbolAndField(){this.fieldList={},this.symbolList={}}}class c extends a{constructor(){super(),this.intervalHandle=null,this.handleQuoteRequest=this.handleQuoteRequest.bind(this)}subscribe(e){const{symbols:t=[],fields:s=[]}=e||{},[i,n]=this.updateSymbolAndField({symbols:t,fields:s,isAddition:!0});(i||n)&&(this.intervalHandle&&clearInterval(this.intervalHandle),this.intervalHandle=setInterval((()=>{!function(e,{timeout:t=1e3,callback:s}){const i=new XMLHttpRequest;i.timeout=t,i.open("GET",e,!0),i.onload=()=>{let e=i.responseText;if(i.status>=200&&i.status<300&&e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void s({status:502,message:e.message})}s(null,e)}else s({status:i.status||502,message:i.responseText})},i.onerror=()=>{s({status:i.status||500,message:i.responseText})},i.send()}(`https://query1.finance.yahoo.com/v7/finance/quote?&symbols=${Object.keys(this.symbolList).sort().join(",")}&fields=${Object.keys(this.fieldList).join(",")}`,{callback:this.handleQuoteRequest})}),3e3))}unsubscribe(e){const{symbols:t=[],fields:s=[]}=e||{};this.updateSymbolAndField({symbols:t,fields:s,isAddition:!1}),0===Object.keys(this.symbolList).length&&this.destroy()}destroy(){this.resetSymbolAndField(),this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=null)}handleQuoteRequest(e,t){if(!e&&t){const e={type:"poller",quoteData:{}},s=t.quoteResponse&&t.quoteResponse.result;for(let t=0;t<s.length;t++){const i=s[t],{symbol:n}=i;e.quoteData[n]={price:i,summaryDetail:{}}}postMessage(e)}else console.error("> Error from Finance Quote Streamer:",e)}}class l extends a{constructor(){super(),this.connection=null,this.retries=0}subscribe(e){var t,s;const{symbols:i=[],fields:n=[]}=e||{},[o]=this.updateSymbolAndField({symbols:i,fields:n,isAddition:!0});if(o)if(!this.connection||(null==(t=this.connection)?void 0:t.readyState)!==WebSocket.OPEN&&(null==(s=this.connection)?void 0:s.readyState)!==WebSocket.CONNECTING){const e=()=>{this.retries>10||(this.connection=new WebSocket("wss://streamer.finance.yahoo.com"),this.connection.addEventListener("open",(()=>{this.connection.send(JSON.stringify({subscribe:Object.keys(this.symbolList)}))})),this.connection.addEventListener("error",(t=>{t&&"ECONNREFUSED"===t.code&&(this.retries++,e())})),this.connection.addEventListener("close",(t=>{t&&1e3!==t.code&&(this.retries++,e())})),this.connection.addEventListener("message",this.handleWebSocketUpdate))};e()}else this.connection.readyState===WebSocket.OPEN&&this.connection.send(JSON.stringify({subscribe:Object.keys(this.symbolList)}))}unsubscribe(e){const{symbols:t=[],fields:s=[]}=e||{};this.updateSymbolAndField({symbols:t,fields:s,isAddition:!1}),this.connection&&this.connection.readyState===WebSocket.OPEN&&this.connection.send(JSON.stringify({unsubscribe:t}))}destroy(){this.resetSymbolAndField(),this.connection&&(this.connection.close(),this.connection=null)}handleWebSocketUpdate(e){try{const{PricingData:t}=protobuf.roots.default.quotefeeder,a=function(e){const t=atob(e),s=t.length,i=new Uint8Array(s);for(let e=0;e<s;e++)i[e]=t.charCodeAt(e);return i}(e.data);let c=t.decode(a);c=t.toObject(c,{enums:String});const l={};Array.isArray(c)||(c=[c]),c.forEach((e=>{e&&e.id&&(l[e.id]=function(e){const t={},a={},{marketHours:c}=e,l=e.priceHint||2;let d,u="";switch(c){case"PRE_MARKET":u="preMarket",d="PRE";break;case"REGULAR_MARKET":u="regularMarket",d="REGULAR";break;case"POST_MARKET":u="postMarket",d="POST";break;case"EXTENDED_HOURS_MARKET":u="extendedMarket",d="EXTENDED"}for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){let b=s[c]||c,h=e[c];if(null==h||""===h)continue;switch(b){case"previousClose":case"price":case"time":case"dayHigh":case"dayLow":case"volume":case"changePercent":case"change":o[b]&&!isNaN(h)&&(h=r(h,l)),"time"===b&&(h/=1e3),b=u+b[0].toUpperCase()+b.substr(1);break;case"marketState":h=d}i[b]?a[b]=h:n[b]||(t[b]=h)}return{price:t,summaryDetail:a}}(e))})),postMessage({type:"streamer",quoteData:l})}catch(e){console.error("> Error from Finance Quote Streamer:",e)}}}addEventListener("message",(s=>{const{data:i}=s,{type:n}=i||{};switch(i.cmd){case"subscribe":if("poller"===n)t||(t=new c(n)),t.subscribe(i);else{if(!protobuf)return void console.error("> Finance Streamer: Protobuff library missing so cannot use streamer");e||(e=new l(n)),e.subscribe(i)}break;case"unsubscribe":"poller"===n&&t&&t.unsubscribe(i),"streamer"===n&&e&&e.unsubscribe(i);break;case"destroy":"poller"===n&&t&&(t.destroy(),t=null),"streamer"===n&&e&&(e.destroy(),e=null)}}),!1)})();',"Worker",void 0,s.p+"js/streamer.worker.b8ddc29e6653826c3a90.worker.mjs")}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function c({field:e,value:t,lang:s="en-US",priceHint:i,gmtOffSetMilliseconds:o,timeZoneShort:n,formatStyle:r}){const c={raw:t};switch(e){case"regularMarketVolume":case"marketCap":c.fmt=function(e,t=3){const s=Math.abs(e);return s>=1e12?`${(e/1e12).toFixed(t)}T`:s>=1e9?`${(e/1e9).toFixed(t)}B`:s>=1e6?`${(e/1e6).toFixed(t)}M`:s>=1e3?`${(e/1e3).toFixed(t)}k`:e.toFixed(0)}(t),c.longFmt=Intl.NumberFormat(s,{maximumFractionDigits:0}).format(t);break;case"extendedMarketChangePercent":case"postMarketChangePercent":case"preMarketChangePercent":case"regularMarketChangePercent":{let e=t;isNaN(t)||(e=t/100);const o=i?{minimumFractionDigits:i,maximumFractionDigits:i}:{minimumFractionDigits:2,maximumFractionDigits:4};c.fmt=Intl.NumberFormat(s,a({},o,{style:"percent"})).format(e);break}case"extendedMarketTime":case"preMarketTime":case"postMarketTime":case"regularMarketTime":c.fmt=n&&"number"==typeof o?function(e,t,s){let i="string"==typeof(o=t)?Number(o):"number"==typeof o?o:"object"==typeof o&&o instanceof Date?o.getTime():Date.now();var o;return void 0!==e.gmtOffSetMilliseconds&&("string"==typeof e.gmtOffSetMilliseconds&&(e.gmtOffSetMilliseconds=Number(e.gmtOffSetMilliseconds)),n=i,r=e.gmtOffSetMilliseconds,i=isNaN(r)?n:n+6e4*new Date(n).getTimezoneOffset()+r),function(e,t={}){const{useUTC:s=!1,fmt:i="%I:%M%P",timeZoneShort:o=""}=t;let n="",r="",a="",c="",l=0,d=0,u="";for(;-1!==(d=i.indexOf("%",d));){switch(l!==d&&(c+=i.substring(l,d)),d+=1,u=i[d],u){case"l":case"I":r||(r=s?e.getUTCHours():e.getHours(),r<12?(r=0===r?"12":String(r),n="am"):(r>12&&(r-=12),r=String(r),n="pm")),"I"===u&&1===r.length?c+=`0${r}`:c+=r;break;case"M":a||(a=String(s?e.getUTCMinutes():e.getMinutes()),1===a.length&&(a=`0${a}`)),c+=a;break;case"p":case"P":n||(n=(s?e.getUTCHours():e.getHours())<12?"am":"pm"),c+="p"===u?"am"===n?"AM":"PM":n;break;case"Z":c+=o;break;case"%":c+="%";break;case"Y":c+=e.getFullYear();break;case"m":c+=`0${e.getMonth()+1}`.slice(-2);break;case"d":c+=`0${e.getDate()}`.slice(-2)}d+=1,l=d}return l<i.length&&(c+=i.substr(l)),c}(new Date(i),{fmt:s||"%l:%M %p %Z",timeZoneShort:e.timeZoneShort,useUTC:e.useUTC});var n,r}({timeZoneShort:n,gmtOffSetMilliseconds:o},1e3*t,"%l:%M%p %Z"):"-";break;default:{const e=i?{minimumFractionDigits:i,maximumFractionDigits:i}:{minimumFractionDigits:2,maximumFractionDigits:4};r&&(e.style=r),c.fmt=Intl.NumberFormat(s,e).format(t)}}return c}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={exchange:!0,shortName:!0,priceHint:!0,quoteType:!0,marketState:!0,symbol:!0,miniOption:!0,fromcurrency:!0,lastMarket:!0,circulatingSupply:!0,optionsType:!0,longName:!0},b=["exchangeTimezoneName","exchangeTimezoneShortName","regularMarketTime","gmtOffSetMilliseconds"],f={marketState:!0,preMarketTime:!0,postMarketTime:!0,regularMarketTime:!0,extendedMarketTime:!0};"undefined"!=typeof window&&(window.finQuoteStreamer=new class{constructor(){var o=this;d(this,"updateSubscribers",(async function(e,{symbols:t,fields:s,callback:i,priceHint:n,formatStyle:r}){const a=[];for(let l=0;l<t.length;l++){const d=t[l];o.subscriberMap[d]||(o.subscriberMap[d]={});const u=o.subscriberMap[d];for(let t=0;t<s.length;t++){var c;const l=s[t];u[l]||(u[l]=[]),f[l]&&void 0===(null==(c=o.quoteData[d])?void 0:c.gmtOffSetMilliseconds)&&a.push(d);const b=u[l];if("add"===e)b.push({callback:i,priceHint:n,formatStyle:r});else{let e=-1;for(let t=0;t<b.length;t++)if(b[t].callback===i){e=t;break}-1!==e&&(b.splice(e,1),0===b.length&&(delete o.subscriberMap[d][l],0===Object.keys(o.subscriberMap[d]).length&&delete o.subscriberMap[d]))}}}a.length>0&&o.seedWithQuoteData(a)})),d(this,"seedWithQuoteData",(async function(s){var n,r;const a=`${function(){const e=Math.floor(Math.random()*i.length);return i[e]}()}/v7/finance/quote?symbols=${s.sort().join(",")}&fields=${b.join(",")}&region=${(null==(n=window.finWebCore)?void 0:n.region)||"US"}&lang=${(null==(r=window.finWebCore)?void 0:r.lang)||"en-US"}`;try{const{quoteResponse:{result:s}={}}=await function(s,{method:i="GET",withCredentials:o=!0,headers:n={},body:r,timeout:a=1e3,errorMsg:c="Request failed",beaconString:l="financeWebCore",isFetchDisabled:d=!1}={}){return new Promise(((u,b)=>{const f=Date.now();function m(t={}){"object"==typeof t&&t&&(t.timestamp=f),e("info",l,{code:200,surl:s}),u(t)}function p(t={}){t.status=t.status||500,t.message=t.message||c,e("error",l,{code:t.status,msg:t.message,surl:s}),b(t)}d||void 0===window.fetch?function(e,{method:s="GET",withCredentials:i=!0,headers:o={},body:n,timeout:r=1e3,successCb:a,errorCb:c}){const l=new window.XMLHttpRequest;l.open(s,e,!0),l.timeout=r,l.withCredentials=i,l.onload=()=>{let e=l.responseText;if(l.status>=200&&l.status<300){if("string"==typeof e)try{e=""!==e?JSON.parse(e):{}}catch(e){return void c({status:502,message:e.message})}a(e)}else c({status:l.status||502,message:l.responseText})},l.onerror=()=>{c({status:l.status||500,message:l.responseText})};const d=t({},"GET"!==s?{"Content-Type":"application/json"}:{},o);Object.keys(d).forEach((e=>{l.setRequestHeader(e,d[e])})),l.send(n?JSON.stringify(n):void 0)}(s,{method:i,withCredentials:o,headers:n,body:r,timeout:a,successCb:m,errorCb:p}):function(e,{method:s="GET",withCredentials:i=!0,headers:o={},body:n,timeout:r=1e3,successCb:a,errorCb:c}){const l=new window.AbortController;let d=!1;const u=setTimeout((function(){d=!0,l.abort(),clearTimeout(u),c({status:502,message:"Request Timeout"})}),r);window.fetch(e,{method:s,mode:"cors",credentials:i?"include":"omit",headers:t({},"GET"!==s?{"Content-Type":"application/json"}:{},o),signal:l.signal,body:n?JSON.stringify(n):null}).then((e=>{if(!d)return clearTimeout(u),e.ok?e.text():Promise.reject({status:e.status||502,message:e.statusText})})).then((e=>{let t=e;"application/json"===((null==o?void 0:o["Content-Type"])||"application/json")&&(t=""!==e?JSON.parse(e):{}),a(t)})).catch((e=>{d||c({status:e.status||502,message:e.message})}))}(s,{method:i,withCredentials:o,headers:n,body:r,timeout:a,successCb:m,errorCb:p})}))}(a,{beaconString:"finStreamer"});s.forEach((e=>{o.quoteData[e.symbol]=Object.assign({},e,o.quoteData[e.symbol])}))}catch(e){console.error(e)}})),d(this,"onUpdate",(e=>{const{data:t}=e,{quoteData:s}=t||{};s&&Object.keys(s).forEach((e=>{var t;const{price:i={},summaryDetail:o={}}=null!=(t=s[e])?t:{},n=l({},i,o);this.quoteData[e]=Object.assign({},this.quoteData[e],n);const r=this.subscriberMap[e];r&&Object.keys(n).forEach((t=>{const s=r[t];if(s)for(let o=0;o<s.length;o++){var i;const{priceHint:r,gmtOffSetMilliseconds:a,exchangeTimezoneShortName:l,timeZoneShortName:d}=this.quoteData[e],b=s[o],f=u[t]?n[t]:c({field:t,value:n[t],lang:(null==(i=window.finWebCore)?void 0:i.lang)||"en-US",priceHint:b.priceHint||r,gmtOffSetMilliseconds:a,timeZoneShort:l||d,formatStyle:b.formatStyle});this.quoteData[e][t]=f,b.callback(f,{field:t,quote:this.quoteData[e]})}}))}))})),d(this,"subscribe",(({symbols:e,fields:t,type:s="streamer",callback:i,priceHint:o,formatStyle:n})=>{this.updateSubscribers("add",{symbols:e,fields:t,priceHint:o,formatStyle:n,callback:i}),this.worker.postMessage({cmd:"subscribe",type:s,symbols:e,fields:t})})),d(this,"unsubscribe",(({symbols:e,fields:t,type:s="streamer",callback:i})=>{this.updateSubscribers("remove",{symbols:e,fields:t,callback:i}),this.worker.postMessage({cmd:"unsubscribe",type:s,symbols:e,fields:t})})),d(this,"init",(()=>{new URLSearchParams(window.location.search).has("disableStreaming")||(this.subscriberMap={},this.worker||(this.worker=new r,this.worker.addEventListener("message",this.onUpdate)),this.initialized||Promise.resolve().then(s.bind(s,8010)).then((()=>{this.initialized=!0})))})),this.subscriberMap={},this.worker=null,this.quoteData={},this.initialized=!1}},window.finQuoteStreamer.init())})()})();